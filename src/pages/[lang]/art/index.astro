---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import { useTranslatedPath } from '../../../utils/i18n';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  return [{ params: { lang: 'en' } }, { params: { lang: 'he' } }];
}

const { lang } = Astro.params;
const translatePath = useTranslatedPath(lang as any);

// Load categories from content collection
const allCategories = await getCollection('art-categories');
const sortedCategories = allCategories.sort((a, b) => a.data.order - b.data.order);

const pageTitle = lang === 'he' ? 'אומנות' : 'Art';
---

<BaseLayout title={pageTitle}>
  <div class="container mx-auto px-4 py-12">
    <h1 class="text-4xl mb-12 text-center">{pageTitle}</h1>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-6xl mx-auto">
      {sortedCategories.map((category) => (
        <a
          href={translatePath(`/art/${category.data.slug}`)}
          class="group relative overflow-hidden rounded-lg shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:scale-105"
        >
          <div class="aspect-[16/9]">
            <img
              src={category.data.thumbnail}
              alt={category.data.title[lang as 'he' | 'en']}
              class="w-full h-full object-cover"
            />
            <div class="absolute top-0 {lang === 'he' ? 'right-0' : 'left-0'} text-white px-6" style="background-color: rgba(128, 126, 125, 0.8); height: 33pt; display: flex; align-items: center;">
              <span style={`font-size: 18pt; font-family: ${lang === 'he' ? 'Alef' : 'Source Sans 3'}, sans-serif;`}>{category.data.title[lang as 'he' | 'en']}</span>
            </div>
          </div>
        </a>
      ))}
    </div>
  </div>
</BaseLayout>
